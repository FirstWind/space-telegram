# Загрузка фотографий космоса в Telegram канал

Набор скриптов:

- Cкачивают фотографии космоса
- Отправляют, с локального массива фотографий, раз в сутки, по одной в чат канал

### photo_space_x.py

Делает запрос к [API SpaceX](https://api.spacexdata.com/v3/launches/latest?pretty=true)  
и получает список из ссылок в формате JSON на фотографии с последнего запуска.


### photo_nasa.py

Делает запрос к [API NASA](https://api.nasa.gov/planetary/apod)  
и получает список из ссылок в формате JSON на фотографии за последний (месяц).  
Время можно изменять в настройках файла окружения `.env`. Для скачивания фотографий   
необходим Token.


### photo_nasa_epic.py

Делает запрос к [API NASA EPIC](https://api.nasa.gov/EPIC/archive/natural/2019/05/30/png/epic_1b_20190530011359.png?api_key=DEMO_KEY)  
и получает данные в формате JSON на фотографии нашей планеты по умолчанию 10.  
Количество можно изменять в настройках файла окружения. Для выполнения запроса  
сервис требует Token.


### photo_bot.py

Запускает бота в телеграмме и отсылает с помощью него по одной картинки сутки.  
Фотография выбирается случайным образом из локального массива в корневой папке `images/`  


##### _файл .env_. Что должно быть внутри

```dotenv
TOKEN_NASA=секретный ключ для API запросов к сервису API NASA
TOKEN_TELEGRAM=секретный ключ для API запросов в Telegram 
CHANNEL_TELEGRAM_ID=идентификатор вашего канала в Telegram. Например: @PhotosOfSpace
DELTA_DATE=30 количество дней от текущей даты для скачивания фотографий в скрипте photo_nasa.py  
PATH_IMAGES=images/ Путь к локальному массиву фотографий космоса
TIME_SLEEP=86400 Время в (сек) для отсылки фотографии
```

Можно запускать скрипты по отдельности, так общим скриптом `main.py`,  
он предлагает сначала скачать на выбор фотогорафии, затем запустит бота.
Запуск производится в терминале.  
```shell
python main.py
```

### Как установить

Скачайте код с GitHab; 
```
git clone https://github.com/FirstWind/space-telegram.git
```
Установите виртуальное окружение `vitrualenv`;

Python3 должен быть уже установлен;
Для установки используйте pip (или pip3, есть конфликт с Python2) зависимостей.  
Введите команду:
```shell
pip install -r requirements.txt
```
Для работы бота необходимо создать его в телеграмме. Получить Token и прописать его в `.env`  
Затем создать канал и добавить бота администратором в этот канал. Также потребуется   
идентификатор канала, для отправки в него фотографий.   
Идентификатр нужно прописать в файл настроек `.env`.  
[Инструкция по созданию бота и трансляции в канал телеграмма](https://way23.ru/%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%B1%D0%BE%D1%82%D0%B0-%D0%B2-telegram.html)  
Для скачивания фотографий с сайта Nasa потребуется Token, который можно получить   
пройдя регистрацию на [сайте NASA](https://api.nasa.gov/), его нужно прописать в `.env`  

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).